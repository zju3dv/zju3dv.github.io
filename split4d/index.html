<!DOCTYPE html>
<!-- python .\scripts\tools\compress_videos.py --data_root "C:\Users\56295\OneDrive - xudenden\418\Long Volumetric Video\Long Volumetric Video Materials\videos" --videos_dir demo --output_dir demo_x0.5 --vcodec libx264 --pix_fmt yuv420p --tag "" --preset "" --crf 28 --resize 0.5 -->
<html lang="en">

<head>
    <meta content="Split4D" name="title" />
    <meta content="Split4D: Decomposed 4D Scene Reconstruction Without Video Segmentation" name="description" />
    <meta content="4D Reconstruction, Scene Decomposition, Computer Vision, Computer Graphics, Novel View Synthesis" name="keywords" />
    <meta content="index, follow" name="robots" />
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <meta content="English" name="language" />
    <meta content="Yongzhen Hu" name="author" />
    <title>Split4D</title>
    <!-- Bootstrap -->
    <script src="js/video_comparison.js"></script>
    <script src="js/jquery-3.4.1.min.js"></script>
    <script src="js/bootstrap-4.4.1.js"></script>

    <link href="css/bootstrap-4.4.1.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/brands.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/solid.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/fontawesome.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@300;400;500;700;800;900&amp;display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" rel="stylesheet" />
    <link href="img/favicon.svg" rel="icon" sizes="any" type="image/svg+xml" />

    <script src="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/contrib/auto-render.min.js"></script>

    <style>
        code {
            white-space: pre-wrap;
        }
        
        body {
            font-family: 'Jost';
            font-weight: 500;
            font-size: 1.25em;
        }
        
        h1 {
            font-size: 2.25em;
        }
        
        h2 {
            font-size: 1.75em;
        }
        
        h3 {
            font-size: 1.5em;
        }
        
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-weight: bolder;
        }
        
        b {
            font-weight: bolder;
        }
        
        strong {
            font-weight: bold;
        }
        
        section>h5 {
            padding-bottom: 30px;
        }
        
        .col-12>h3 {
            padding-top: 30px;
        }
        
        .results-section {
            padding-bottom: 30px;
        }
        
        .carousel-control-prev,
        .carousel-control-next {
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .carousel-control-prev {
            left: 25px;
        }
        
        .carousel-control-next {
            right: 25px;
        }
        
        .carousel-indicators {
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            bottom: 10%;
            left: 90%;
            /* Adjust vertical position */
            text-align: center;
            /* Center the content horizontally */
            margin: 0;
            padding: 0;
            list-style: none;
        }
        
        .carousel-indicators li {
            background-color: transparent;
            /* Hide the default Bootstrap indicators */
            border: none;
            /* Remove border */
            margin: 0 25px;
            display: inline-block;
        }
        
        .indicator-dot {
            display: inline-block;
            width: 15px;
            height: 15px;
            text-indent: -999px;
            border: none;
            border-radius: 10px;
            background-color: rgba(0, 0, 0, 0.5);
        }
        
        .row.sm-gutters {
            margin-right: 5px;
            margin-left: 5px;
            margin-top: 5px;
            margin-bottom: 5px;
        }
        
        .row.sm-gutters>.col-md-4 {
            padding-right: 5px;
            padding-left: 5px;
            padding-top: 5px;
            padding-bottom: 5px;
        }
        
        .row.sm-gutters>.col-md-6 {
            padding-right: 5px;
            padding-left: 5px;
            padding-top: 5px;
            padding-bottom: 5px;
        }
        
        .row.sm-gutters>.col-md-12 {
            padding-top: 5px;
            padding-bottom: 5px;
            padding-right: 5px;
            padding-left: 5px;
        }
        
        .zoom-element {
            transition: transform 0.2s ease-in-out;
        }
        
        .zoom-element:hover {
            transform: scale(1.25);
        }
        /* Toggle to disable hover zoom site-wide */
        
        body.zoom-disabled .zoom-element:hover {
            transform: none;
        }
        /* On-screen toggle button styling */
        
        .zoom-toggle {
            position: fixed;
            top: 16px;
            right: 16px;
            z-index: 1050;
            /* above carousels */
        }
        
        video,
        iframe {
            border-radius: 10px;
            padding: 0px;
            margin: 0px;
        }
        
        .comparison-canvas {
            border-radius: 10px;
            padding: 0px;
            margin: 0px;
        }
        
        .a16x9 {
            aspect-ratio: 16/9;
        }
        
        .a4x3 {
            aspect-ratio: 4/3;
        }
        
        .a1x1 {
            aspect-ratio: 1;
        }
        
        .a085 {
            aspect-ratio: 1430/1678;
        }
        
        .a133 {
            aspect-ratio: 1352/1014;
        }
        
        .a1875 {
            aspect-ratio: 1920/1024;
        }
        /* Small overlay label for method name */
        
        .method-badge {
            position: absolute;
            top: 12px;
            left: 12px;
            padding: 6px 10px;
            border-radius: 6px;
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            font-size: 0.8em;
        }
    </style>
    <script>
    </script>
    </link>
</head>

<body class="zoom-disabled">
    <!-- cover -->
    <section>
        <div class="jumbotron text-center mt-0">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <h1 style="font-weight: bold">
                            <b>
                
                <!-- <br /> -->
                Split4D:<span style="color: #6589bf">Decomposed</span> 4D Scene Reconstruction <span style="color: #f49d75">Without Video Segmentation</span>
              </b>
                        </h1>
                        <h4 style="color:#5a6268; font-weight: bold;">SIGGRAPH Asia 2025 (TOG)</h4>
                        <hr>
                        <a href="https://github.com/Edisoneh" target="_blank">Yongzhen Hu<sup>1,3</sup><sup></sup></a>
                        <a href="https://github.com/yangyihui0502" target="_blank">Yihui Yang<sup>1</sup><sup></sup></a>
                        <a href="https://github.com/haotongl" target="_blank">Haotong Lin<sup>1</sup><sup></sup></a>
                        <a href="https://github.com/wyf2020" target="_blank">Yifan Wang<sup>1</sup></a>
                        <a href="https://github.com/DongJT1996" target="_blank">Junting Dong<sup>2</sup></a>
                        <a>Yifu Deng<sup>3</sup></a>
                        <a>Xinyu Zhu<sup>3</sup></a>
                        <br/>
                        <a>Fan Jia<sup>3</sup></a>
                        <a href="http://www.cad.zju.edu.cn/home/bao/" target="_blank">Hujun Bao<sup>1</sup></a>
                        <a href="https://xzhou.me" target="_blank">Xiaowei Zhou<sup>1</sup><sup></sup></a>
                        <a href="https://pengsida.net" target="_blank">Sida Peng<sup>1</sup><sup>x</sup></a>
                        <p>
                            <sup>1</sup>Zhejiang University&nbsp;&nbsp;&nbsp;&nbsp;<sup>2</sup>Shanghai AI Lab&nbsp;&nbsp;&nbsp;&nbsp;<sup>3</sup>Ant Group
                            <br />
                            <span style="color: #5a6268;">
                <sup>x</sup>Corresponding Author
                </span>
                        </p>
                        <div class="row justify-content-center">
                            <div class="column">
                                <p class="mb-5">
                                    <a class="btn btn-large btn-light" href="#" role="button" target="_blank">
                                        <i class="fa fa-file-pdf-o"></i>
                                        <b>Paper</b>
                                    </a>
                                </p>
                            </div>
                            <div class="column">
                                <p class="mb-5">
                                    <a class="btn btn-large btn-light" href="https://github.com/dendenxu/fast-gaussian-rasterization" role="button" target="_blank">
                                        <i class="fa fa-github"></i>
                                        <b>Renderer</b>
                                    </a>
                                </p>
                            </div>

                            <div class="column">
                                <p class="mb-5">
                                    <a class="btn btn-large btn-light" href="https://github.com/zju3dv/EasyVolcap" role="button" target="_blank">
                                        <i class="fa fa-github"></i>
                                        <b>Framework</b>
                                    </a>
                                </p>
                            </div>

                            <div class="column">
                                <p class="mb-5">
                                    <a class="btn btn-large btn-light" href="https://forms.gle/MzJqZjBfyZ53fRMZ7" role="button" target="_blank">
                                        <i class="fa-solid fa-database"></i>
                                        <b><span style="font-style: italic">SelfCap</span> Dataset</b>
                                    </a>
                                </p>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-12 text-center">
                    <b style="color: #8899a5">
            Visual Effects Demo Videos
          </b>


                    <div class="carousel slide" data-interval="100000" data-ride="carousel" id="demo-carousel">
                        <ol class="carousel-indicators">
                            <li class="active" data-slide-to="0" data-target="#demo-carousel">
                                <span class="indicator-dot"></span>
                            </li>
                            <li data-slide-to="1" data-target="#demo-carousel">
                                <span class="indicator-dot"></span>
                            </li>
                            <li data-slide-to="2" data-target="#demo-carousel">
                                <span class="indicator-dot"></span>
                            </li>
                            <li data-slide-to="3" data-target="#demo-carousel">
                                <span class="indicator-dot"></span>
                            </li>
                        </ol>
                        <div class="carousel-inner zoom-element">
                            <div class="carousel-item active">
                                <div class="row sm-gutters">
                                    <div class="col-md-12">
                                        <video autoplay class="a16x9" data-desktop-vid1="videos/demo1.mp4" data-desktop-vid2="videos/demo1.mp4" data-mobile-vid1="videos/demo1.mp4" data-mobile-vid2="videos/demo1.mp4" loop muted playsinline controls aria-controls poster="img/spinner.svg" width="100%">
                    </video>
                                    </div>
                                </div>
                            </div>
                            <div class="carousel-item">
                                <div class="row sm-gutters">
                                    <div class="col-md-12">
                                        <video class="a16x9" data-desktop-vid1="videos/demo2.mp4" data-desktop-vid2="videos/demo2.mp4" data-mobile-vid1="videos/demo2.mp4" data-mobile-vid2="videos/demo2.mp4" loop muted playsinline controls aria-controls poster="img/spinner.svg" width="100%">
                    </video>
                                    </div>
                                </div>
                            </div>
                            <div class="carousel-item">
                                <div class="row sm-gutters">
                                    <div class="col-md-12">
                                        <video class="a16x9" data-desktop-vid1="videos/demo3.mp4" data-desktop-vid2="videos/demo3.mp4" data-mobile-vid1="videos/demo3.mp4" data-mobile-vid2="videos/demo3.mp4" loop muted playsinline controls aria-controls poster="img/spinner.svg" width="100%">
                    </video>
                                    </div>
                                </div>
                            </div>
                            <div class="carousel-item">
                                <div class="row sm-gutters">
                                    <div class="col-md-12">
                                        <video class="a16x9" data-desktop-vid1="videos/demo4.mp4" data-desktop-vid2="videos/demo4.mp4" data-mobile-vid1="videos/demo4.mp4" data-mobile-vid2="videos/demo4.mp4" loop muted playsinline controls aria-controls poster="img/spinner.svg" width="100%">
                    </video>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <a class="carousel-control-prev" data-slide="prev" href="#demo-carousel" role="button">
                            <span aria-hidden="true" class="carousel-control-prev-icon"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" data-slide="next" href="#demo-carousel" role="button">
                            <span aria-hidden="true" class="carousel-control-next-icon"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>

                </div>
            </div>
        </div>
    </section>

    <section>
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h3>Abstract</h3>
                    <hr style="margin-top: 0px" />
                    <img src="img/teaser.jpg" width="100%" />
                    <p style="text-align: justify; text-justify: inter-word;">
                        This paper addresses the problem of decomposed 4D scene reconstruction from multi-view videos. Recent methods achieve this by lifting video segmentation results to a 4D representation through differentiable rendering techniques. Therefore, they heavily
                        rely on the quality of video segmentation maps, which are often unstable, leading to unreliable reconstruction results. To overcome this challenge, our key idea is to represent the decomposed 4D scene with the Freetime FeatureGS
                        and design a streaming feature learning strategy to accurately recover it from per-image segmentation maps, eliminating the need for video segmentation. Freetime FeatureGS models the dynamic scene as a set of Gaussian primitives
                        with learnable features and linear motion ability, allowing them to move to neighboring regions over time. We apply a contrastive loss to Freetime FeatureGS, forcing primitive features to be close or far apart based on whether
                        their projections belong to the same instance in the 2D segmentation map. As our Gaussian primitives can move across time, it naturally extends the feature learning to the temporal dimension, achieving 4D segmentation. Furthermore,
                        we sample observations for training in a temporally ordered manner, enabling the streaming propagation of features over time and effectively avoiding local minima during the optimization process. Experimental results on several
                        datasets show that the reconstruction quality of our method outperforms recent methods by a large margin.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <section>
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h3>Method</h3>
                    <hr style="margin-top: 0px" />
                    <img src="img/pipeline.png" width="100%" />
                    <p style="text-align: justify; text-justify: inter-word;">
                        Overview of our pipeline. (a) The decomposed 4D representation is constructed based on spatio-temporally free Gaussian primitives, each associated with a learnable feature vector. (b) During training, a streaming sampling strategy selects temporally ordered
                        frames, ensuring that features propagate smoothly along their motion trajectories across time. (c) Exploiting Freetime FeatureGS’s local temporal continuity, we impose a contrastive loss on frame-wise inconsistent 2D segmentation
                        labels, enabling 4D feature learning.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <section>
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h3>More Demos</h3>
                    <hr style="margin-top: 0px" />
                    <div class="row">
                        <div class="col-md-12">
                            <h5>
                                <button aria-controls="more-visual-effects-demos" aria-expanded="false" class="btn btn-primary" data-target="#more-visual-effects-demos" data-toggle="collapse" id="more-visual-effects-demos-button" type="button">
              &nbsp;Click to Expand&nbsp;
            </button> More Visual Effects
                            </h5>
                            <div class="collapse" id="more-visual-effects-demos">
                                <div class="col-md-12">
                                    <div class="row sm-gutters">
                                        <div class="col-md-6 zoom-element">
                                            <video class="a16x9" data-desktop-vid1="videos/more_effects_01.mp4" data-mobile-vid1="videos/more_effects_01.mp4" loop muted playsinline controls aria-controls poster="img/spinner.svg" preload="none" width="100%"></video>
                                        </div>
                                        <div class="col-md-6 zoom-element">
                                            <video class="a16x9" data-desktop-vid1="videos/more_effects_02.mp4" data-mobile-vid1="videos/more_effects_02.mp4" loop muted playsinline controls aria-controls poster="img/spinner.svg" preload="none" width="100%"></video>
                                        </div>
                                        <div class="col-md-6 zoom-element">
                                            <video class="a16x9" data-desktop-vid1="videos/more_effects_03.mp4" data-mobile-vid1="videos/more_effects_03.mp4" loop muted playsinline controls aria-controls poster="img/spinner.svg" preload="none" width="100%"></video>
                                        </div>
                                        <div class="col-md-6 zoom-element">
                                            <video class="a16x9" data-desktop-vid1="videos/more_effects_04.mp4" data-mobile-vid1="videos/more_effects_04.mp4" loop muted playsinline controls aria-controls poster="img/spinner.svg" preload="none" width="100%"></video>
                                        </div>
                                        <div class="col-md-6 zoom-element">
                                            <video class="a16x9" data-desktop-vid1="videos/more_effects_05.mp4" data-mobile-vid1="videos/more_effects_05.mp4" loop muted playsinline controls aria-controls poster="img/spinner.svg" preload="none" width="100%"></video>
                                        </div>
                                        <div class="col-md-6 zoom-element">
                                            <video class="a16x9" data-desktop-vid1="videos/more_effects_06.mp4" data-mobile-vid1="videos/more_effects_06.mp4" loop muted playsinline controls aria-controls poster="img/spinner.svg" preload="none" width="100%"></video>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <h5>
                                <button aria-controls="street-demos" aria-expanded="false" class="btn btn-primary" data-target="#street-demos" data-toggle="collapse" id="street-demos-button" type="button">
              &nbsp;Click to Expand&nbsp;
            </button> Street Scenes
                            </h5>
                            <div class="collapse" id="street-demos">
                                <div class="col-md-12">
                                    <p>We obtained trajectories through interpolation and followed <a href="https://github.com/yifanlu0227/ChatSim" target="_blank">ChatSim</a> to implement vehicle editing.</p>
                                    <div class="row sm-gutters">
                                        <div class="col-md-6 zoom-element" style="position: relative;">
                                            <video class="a16x9" data-desktop-vid1="videos/street_scene_1_original.mp4" data-mobile-vid1="videos/street_scene_1_original.mp4" loop muted playsinline controls aria-controls poster="img/spinner.svg" preload="none" width="100%"></video>
                                            <div class="method-badge">Before Editing</div>
                                        </div>
                                        <div class="col-md-6 zoom-element" style="position: relative;">
                                            <video class="a16x9" data-desktop-vid1="videos/street_scene_1_edited.mp4" data-mobile-vid1="videos/street_scene_1_edited.mp4" loop muted playsinline controls aria-controls poster="img/spinner.svg" preload="none" width="100%"></video>
                                            <div class="method-badge">After Editing</div>
                                        </div>
                                    </div>
                                    <div class="row sm-gutters">
                                        <div class="col-md-6 zoom-element" style="position: relative;">
                                            <video class="a16x9" data-desktop-vid1="videos/street_scene_2_original.mp4" data-mobile-vid1="videos/street_scene_2_original.mp4" loop muted playsinline controls aria-controls poster="img/spinner.svg" preload="none" width="100%"></video>
                                            <div class="method-badge">Before Editing</div>
                                        </div>
                                        <div class="col-md-6 zoom-element" style="position: relative;">
                                            <video class="a16x9" data-desktop-vid1="videos/street_scene_2_edited.mp4" data-mobile-vid1="videos/street_scene_2_edited.mp4" loop muted playsinline controls aria-controls poster="img/spinner.svg" preload="none" width="100%"></video>
                                            <div class="method-badge">After Editing</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    </section>

    <section>
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h3>Baseline Comparisons</h3>
                    <hr style="margin-top: 0px" />
                </div>
            </div>
        </div>
    </section>

    <section class="results-section">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h5>
                        <button aria-controls="comp-render" aria-expanded="false" class="btn btn-primary" data-target="#comp-render" data-toggle="collapse" id="comp-render-button" type="button">
              &nbsp;Click to Expand&nbsp;
            </button> Comparisons with <b><a href="https://oceanying.github.io/OmniSeg3D/">OmniSeg3D</a></b>, <b><a href="https://jsxzs.github.io/sa4d/">SA4D</a></b> and <b><a href="https://yunjinli.github.io/project-sadg/">SADG</a></b>
                    </h5>
                </div>
            </div>
            <div class="collapse" id="comp-render">
                <div class="col-md-12">
                    <div class="row sm-gutters">
                        <div class="col-md-6 zoom-element">
                            <video class="a16x9" data-desktop-vid1="videos/comp1.mp4" data-mobile-vid1="videos/comp1.mp4" loop muted playsinline controls aria-controls poster="img/spinner.svg" preload="none" width="100%"></video>
                        </div>
                        <div class="col-md-6 zoom-element">
                            <video class="a16x9" data-desktop-vid1="videos/comp2.mp4" data-mobile-vid1="videos/comp2.mp4" loop muted playsinline controls aria-controls poster="img/spinner.svg" preload="none" width="100%"></video>
                        </div>
                        <div class="col-md-6 zoom-element">
                            <video class="a16x9" data-desktop-vid1="videos/comp3.mp4" data-mobile-vid1="videos/comp3.mp4" loop muted playsinline controls aria-controls poster="img/spinner.svg" preload="none" width="100%"></video>
                        </div>
                        <div class="col-md-6 zoom-element">
                            <video class="a16x9" data-desktop-vid1="videos/comp4.mp4" data-mobile-vid1="videos/comp4.mp4" loop muted playsinline controls aria-controls poster="img/spinner.svg" preload="none" width="100%"></video>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- citing -->
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                </br>
                </br>
                <h3>Citation</h3>
                <hr style="margin-top: 0px" />
                <pre style="background-color: #e9eeef; padding: 1.5em 1.5em; border-radius: 20px; font-size: 0.75em;">
<code>@article{hu2025split4d,
  title={Split4D: Decomposed 4D Scene Reconstruction Without Video Segmentation},
  author={Hu, Yongzhen and Yang, Yihui and Lin, Haotong and Wang, Yifan and Dong, Junting and Deng, Yifu and Zhu, Xinyu and Jia, Fan and Bao, Hujun and Zhou, Xiaowei and Peng, Sida},
  journal={ACM Transactions on Graphics (TOG)},
  volume={44},
  number={6},
  pages={1--15},
  year={2025},
  publisher={ACM New York, NY, USA}
}</code></pre>
                <hr />
            </div>
        </div>
    </div>

    <footer class="text-center" style="margin-bottom: 10px">
        Thanks to
        <a href="https://zhenx.me/" target="_blank">Zhen Xu</a> for the website template, which can be found
        <a href="https://github.com/zju3dv/zju3dv.github.io/tree/master/longvolcap" target="_blank">here</a>.
    </footer>
    <!-- Default Statcounter code for Long Volumetric Video
http://zju3dv.github.io/longvolcap -->
    <script type="text/javascript">
        var sc_project = 13068940;
        var sc_invisible = 1;
        var sc_security = "a17e5a49";
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
    <noscript>
    <div class="statcounter"><a title="web statistics" href="https://statcounter.com/" target="_blank"><img class="statcounter" src="https://c.statcounter.com/13068940/0/a17e5a49/1/" alt="web statistics" referrerPolicy="no-referrer-when-downgrade"></a></div>
  </noscript>
    <!-- End of Statcounter Code -->
    <script>
        var buttonIds = [
            'more-visual-effects-demos-button',
            'selfcap-demos-button',
            'street-demos-button',
            'comp-render-button'
        ];
        var sectionIds = [
            'more-visual-effects-demos',
            'selfcap-demos',
            'street-demos',
            'comp-render'
        ];
        for (var i = 0; i < buttonIds.length; i++) {
            (function(index) {
                var button = document.getElementById(buttonIds[index]);
                var section = document.getElementById(sectionIds[index]);
                if (!button || !section) {
                    return;
                }
                button.addEventListener('click', function() {
                    if (section.classList.contains('show')) {
                        button.innerText = '\u00a0Click to Expand\u00a0';
                        var videos = section.getElementsByTagName('video');
                        for (var j = 0; j < videos.length; j++) {
                            if (videos[j].readyState >= HTMLMediaElement.HAVE_CURRENT_DATA) {
                                videos[j].pause();
                            }
                        }
                    } else {
                        button.innerText = 'Click to Collapse';
                        var videos = section.getElementsByTagName('video');
                        for (var j = 0; j < videos.length; j++) {
                            videos[j].play();
                        }
                    }
                });
            })(i);
        }

        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [{
                    left: "$",
                    right: "$",
                    display: false
                }, {
                    left: "$$",
                    right: "$$",
                    display: true
                }]
            });
        });

        // Zoom toggle: enable/disable hover zoom across the page
        (function() {
            var btn = document.getElementById('zoomToggleBtn');
            if (!btn) return;
            var zoomEnabled = true;

            function updateUI() {
                if (zoomEnabled) {
                    document.body.classList.remove('zoom-disabled');
                    btn.textContent = '关闭放大';
                    btn.setAttribute('aria-pressed', 'true');
                    btn.classList.remove('btn-secondary');
                    btn.classList.add('btn-dark');
                } else {
                    document.body.classList.add('zoom-disabled');
                    btn.textContent = '开启放大';
                    btn.setAttribute('aria-pressed', 'false');
                    btn.classList.remove('btn-dark');
                    btn.classList.add('btn-secondary');
                }
            }
            btn.addEventListener('click', function() {
                zoomEnabled = !zoomEnabled;
                updateUI();
            });
            // Initialize UI state
            updateUI();
        })();


        function handleCarouselSlide(event) {
            // Reference to the current carousel
            var currentCarousel = $(event.target);

            // Check each video in the current carousel
            currentCarousel.find('video').each(function() {
                var isVideoInActiveItem = $(this).closest('.carousel-item').hasClass('active');
                if (isVideoInActiveItem) {
                    if (this.readyState >= HTMLMediaElement.HAVE_CURRENT_DATA) {
                        this.height = (this.videoHeight / this.videoWidth) * $(this).parent().width();
                    }
                    this.play();
                } else {
                    if (this.readyState >= HTMLMediaElement.HAVE_CURRENT_DATA) {
                        this.pause();
                    }
                }
            });
        }

        $('.carousel').on('slid.bs.carousel', handleCarouselSlide);

        $(document).ready(function() {
            $('video').each(function() {
                var $video = $(this);
                var $carousel = $video.closest('.carousel');
                if ($carousel.length > 0) {
                    $video.on('ended', function() {
                        $carousel.carousel('next');
                    });
                }
            });
        });

        function updateVideoShape() {
            this.height = (this.videoHeight / this.videoWidth) * $(this).parent().width();
        }

        // fix the element's width and height properties to the current video ones
        $("video").each(function() {
            if (!this.classList.contains('comparison-video')) {
                $(this).on('loadeddata', updateVideoShape);
            }
        });

        // $("#renbody-results-button").click()
        document.addEventListener("DOMContentLoaded", function() {
            // Get all videos
            var videos = document.querySelectorAll('video');

            // Add source to video tag
            function addSourceToVideo(element, src) {
                var source = document.createElement('source');
                source.src = src;
                source.type = 'video/mp4';
                element.appendChild(source);
            }

            // Determine screen size and select appropriate videos
            function whichSizeVideo(element) {
                var windowWidth = window.innerWidth || window.innerWidth;
                var prefix = windowWidth > 1200 ? "desktop" : "mobile";

                // Get all data attributes for the given prefix (e.g., data-mobile-vid1, data-mobile-vid2, ...)
                var i = 1;
                while (element.dataset[prefix + "Vid" + i]) {
                    addSourceToVideo(element, element.dataset[prefix + "Vid" + i]);
                    i++;
                }
            }

            // Initialize only if the page has videos
            function videoBandwidth() {
                if (videos) {
                    videos.forEach(whichSizeVideo);
                }
            }
            videoBandwidth();

            // FIXME: this is not working yet
            function videoSize() {
                if (videos) {
                    videos.forEach(updateVideoShape);
                }
            }
            // Listen to window resize
            window.onresize = videoSize;

            setInterval(function() {
                // Select all comparison-video type videos
                let videos = document.querySelectorAll('.comparison-video');

                videos.forEach(video => {
                    // If the id does not end with After
                    if (!video.id.endsWith('After')) {
                        resizeAndPlay(video);
                    }
                });
            }, 10000); // 每500毫秒检测一次

        });
    </script>
</body>

</html>